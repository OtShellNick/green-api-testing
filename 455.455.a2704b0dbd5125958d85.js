/*! For license information please see 455.455.a2704b0dbd5125958d85.js.LICENSE.txt */
"use strict";(self.webpackChunkgreen_api_testing=self.webpackChunkgreen_api_testing||[]).push([[455],{4455:(e,t,r)=>{r.r(t),r.d(t,{default:()=>k});var n,a,u=r(7294),s=r(743),m=r(3414),o=r(1054),c=r(6310),i=r(4910);function l(){return(l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function f(e){return u.createElement("svg",l({xmlSpace:"preserve",viewBox:"0 0 212 212"},e),n=n||u.createElement("path",{fill:"#DFE5E7",d:"M106.251.5C164.653.5 212 47.846 212 106.25S164.653 212 106.25 212C47.846 212 .5 164.654.5 106.25S47.846.5 106.251.5z"}),a=a||u.createElement("g",{fill:"#FFF"},u.createElement("path",{d:"M173.561 171.615a62.767 62.767 0 0 0-2.065-2.955 67.7 67.7 0 0 0-2.608-3.299 70.112 70.112 0 0 0-3.184-3.527 71.097 71.097 0 0 0-5.924-5.47 72.458 72.458 0 0 0-10.204-7.026 75.2 75.2 0 0 0-5.98-3.055c-.062-.028-.118-.059-.18-.087-9.792-4.44-22.106-7.529-37.416-7.529s-27.624 3.089-37.416 7.529c-.338.153-.653.318-.985.474a75.37 75.37 0 0 0-6.229 3.298 72.589 72.589 0 0 0-9.15 6.395 71.243 71.243 0 0 0-5.924 5.47 70.064 70.064 0 0 0-3.184 3.527 67.142 67.142 0 0 0-2.609 3.299 63.292 63.292 0 0 0-2.065 2.955 56.33 56.33 0 0 0-1.447 2.324c-.033.056-.073.119-.104.174a47.92 47.92 0 0 0-1.07 1.926c-.559 1.068-.818 1.678-.818 1.678v.398c18.285 17.927 43.322 28.985 70.945 28.985 27.678 0 52.761-11.103 71.055-29.095v-.289s-.619-1.45-1.992-3.778a58.346 58.346 0 0 0-1.446-2.322zM106.002 125.5c2.645 0 5.212-.253 7.68-.737a38.272 38.272 0 0 0 3.624-.896 37.124 37.124 0 0 0 5.12-1.958 36.307 36.307 0 0 0 6.15-3.67 35.923 35.923 0 0 0 9.489-10.48 36.558 36.558 0 0 0 2.422-4.84 37.051 37.051 0 0 0 1.716-5.25c.299-1.208.542-2.443.725-3.701.275-1.887.417-3.827.417-5.811s-.142-3.925-.417-5.811a38.734 38.734 0 0 0-1.215-5.494 36.68 36.68 0 0 0-3.648-8.298 35.923 35.923 0 0 0-9.489-10.48 36.347 36.347 0 0 0-6.15-3.67 37.124 37.124 0 0 0-5.12-1.958 37.67 37.67 0 0 0-3.624-.896 39.875 39.875 0 0 0-7.68-.737c-21.162 0-37.345 16.183-37.345 37.345 0 21.159 16.183 37.342 37.345 37.342z"})))}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function y(n){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?b(Object(a),!0).forEach(function(e){var t,r;t=n,r=a[e=e],(e=function(e){e=function(e,t){if("object"!==p(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===p(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(a)):b(Object(a)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(a,e))})}return n}function v(e){var e=e.contact,t=(0,s.v9)(function(e){return e.auth}).auth,r=(0,m.GW)(y(y({},t),{},{chatId:e.id})).data,n=(0,s.I0)();return r?u.createElement("li",{className:"contacts__item",onClick:function(){n((0,i.Wd)(r.chatId))}},r.avatar?u.createElement("img",{className:"contacts__item_avatar",src:r.avatar,alt:"#"}):u.createElement(f,{className:"contacts__item_avatar-default"}),u.createElement("div",{className:"contacts__item_name"},u.createElement("span",null,r.name||r.chatId))):null}function d(e){var e=e.contacts,r=(0,s.I0)(),t=c.Ry().shape({contact:c.Rx().typeError("Must be a number")}),t=(0,o.TA)({validationSchema:t,initialValues:{contact:""},onSubmit:function(e,t){t=t.resetForm,e=e.contact.split("+")[1]+"@c.us";r((0,i.Wd)(e)),t()}});return u.createElement("ul",{className:"contacts"},u.createElement("li",null,u.createElement("form",{className:"contacts__form",onSubmit:t.handleSubmit},u.createElement("input",{id:"contact",name:"contact",type:"tel",placeholder:"+79999999999",onChange:t.handleChange,onBlur:t.handleBlur,value:t.values.message}),t.touched.contact&&t.errors.contact)),e&&e.map(function(e,t){return u.createElement(v,{key:e.id+t,contact:e})}))}function h(){return u.createElement("div",{className:"chat__not-active"},u.createElement("h1",null,"Green API"),u.createElement("p",null,"Отправляйте и получайте сообщения без необходимости оставлять телефон подключённым."))}function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function E(n){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?O(Object(a),!0).forEach(function(e){var t,r;t=n,r=a[e=e],(e=function(e){e=function(e,t){if("object"!==g(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==g(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===g(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(a)):O(Object(a)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(a,e))})}return n}function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,c,o,i=[],l=!0,u=!1;try{if(c=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=c.call(r)).done)&&(i.push(n.value),i.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){var r;if(e)return"string"==typeof e?S(e,t):"Map"===(r="Object"===(r=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?S(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _(e){var r=e.refetch,e=(0,s.v9)(function(e){return e.auth}).auth,t=(0,s.v9)(function(e){return e.chat}).chatId,n=(c=j((0,u.useState)(""),2))[0],a=c[1],c=((0,m.dS)(E(E({},e),{},{chatId:t,message:n}),{skip:""===n}),(0,o.TA)({initialValues:{message:""},onSubmit:function(e,t){t=t.resetForm;a(e.message),t(),r()}}));return u.createElement("div",{className:"chat__active_form"},u.createElement("form",{className:"login__form",onSubmit:c.handleSubmit},u.createElement("input",{id:"message",name:"message",type:"text",placeholder:"Your message",onChange:c.handleChange,value:c.values.message}),u.createElement("button",{className:"chat__active_form_button",type:"submit"},"Send")))}function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function I(n){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?P(Object(a),!0).forEach(function(e){var t,r;t=n,r=a[e=e],(e=function(e){e=function(e,t){if("object"!==w(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==w(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===w(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(a)):P(Object(a)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(a,e))})}return n}function N(){var e,t=(0,u.useRef)(null),r=(0,u.useRef)(null),n=(0,s.v9)(function(e){return e.auth}).auth,a=(0,s.v9)(function(e){return e.chat}).chatId,c=(o=(0,m.C7)(I(I({},n),{},{chatId:a}))).data,o=o.refetch,i=(0,m.GW)(I(I({},n),{},{chatId:a})).data,l=(0,m.tE)(n,{pollingInterval:3e3}).data;return(0,u.useEffect)(function(){r.current=l}),(null==(e=r.current)?void 0:e.receiptId)!==(null==l?void 0:l.receiptId)&&o(),(0,m.Kl)(I(I({},n),{},{receiptId:null==l?void 0:l.receiptId}),{skip:!l}),(0,u.useEffect)(function(){t&&t.current.scrollIntoView({behavior:"smooth"})},[]),console.log(i,a),u.createElement("div",{className:"chat__active"},u.createElement("div",{className:"chat__active_header"},null!=i&&i.avatar?u.createElement("img",{className:"contacts__item_avatar",src:i.avatar,alt:"#"}):u.createElement(f,{className:"contacts__item_avatar-default"}),u.createElement("div",{className:"contacts__item_name"},u.createElement("span",null,null!=i&&i.name?i.name:a))),u.createElement("div",{className:"chat__active_content"},u.createElement("ul",null,c&&c.map(function(e){return u.createElement("li",{key:e.idMessage,style:{textAlign:"incoming"===e.type?"end":"initial",padding:"5px 0"}},e.textMessage)}),u.createElement("li",{style:{height:1},ref:t}))),u.createElement(_,{refetch:o}))}function D(){var e=(0,s.v9)(function(e){return e.chat}).chatId;return console.log("chat",e),u.createElement("div",{className:"chat"},!e&&u.createElement(h,null),e&&u.createElement(N,null))}const k=function(){var e=(0,s.v9)(function(e){return e.auth}).auth,e=(0,m.Gu)(e).data;return u.createElement("div",{className:"main"},u.createElement(d,{contacts:e}),u.createElement(D,null))}}}]);