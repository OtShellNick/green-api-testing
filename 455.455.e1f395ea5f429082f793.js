/*! For license information please see 455.455.e1f395ea5f429082f793.js.LICENSE.txt */
"use strict";(self.webpackChunkgreen_api_testing=self.webpackChunkgreen_api_testing||[]).push([[455],{4455:(e,t,r)=>{r.r(t),r.d(t,{default:()=>A});var n,a,c=r(7294),o=r(743),i=r(3414),l=r(1054),u=r(6310),s=r(4910);function m(){return m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},m.apply(this,arguments)}const f=function(e){return c.createElement("svg",m({xmlSpace:"preserve",viewBox:"0 0 212 212"},e),n||(n=c.createElement("path",{fill:"#DFE5E7",d:"M106.251.5C164.653.5 212 47.846 212 106.25S164.653 212 106.25 212C47.846 212 .5 164.654.5 106.25S47.846.5 106.251.5z"})),a||(a=c.createElement("g",{fill:"#FFF"},c.createElement("path",{d:"M173.561 171.615a62.767 62.767 0 0 0-2.065-2.955 67.7 67.7 0 0 0-2.608-3.299 70.112 70.112 0 0 0-3.184-3.527 71.097 71.097 0 0 0-5.924-5.47 72.458 72.458 0 0 0-10.204-7.026 75.2 75.2 0 0 0-5.98-3.055c-.062-.028-.118-.059-.18-.087-9.792-4.44-22.106-7.529-37.416-7.529s-27.624 3.089-37.416 7.529c-.338.153-.653.318-.985.474a75.37 75.37 0 0 0-6.229 3.298 72.589 72.589 0 0 0-9.15 6.395 71.243 71.243 0 0 0-5.924 5.47 70.064 70.064 0 0 0-3.184 3.527 67.142 67.142 0 0 0-2.609 3.299 63.292 63.292 0 0 0-2.065 2.955 56.33 56.33 0 0 0-1.447 2.324c-.033.056-.073.119-.104.174a47.92 47.92 0 0 0-1.07 1.926c-.559 1.068-.818 1.678-.818 1.678v.398c18.285 17.927 43.322 28.985 70.945 28.985 27.678 0 52.761-11.103 71.055-29.095v-.289s-.619-1.45-1.992-3.778a58.346 58.346 0 0 0-1.446-2.322zM106.002 125.5c2.645 0 5.212-.253 7.68-.737a38.272 38.272 0 0 0 3.624-.896 37.124 37.124 0 0 0 5.12-1.958 36.307 36.307 0 0 0 6.15-3.67 35.923 35.923 0 0 0 9.489-10.48 36.558 36.558 0 0 0 2.422-4.84 37.051 37.051 0 0 0 1.716-5.25c.299-1.208.542-2.443.725-3.701.275-1.887.417-3.827.417-5.811s-.142-3.925-.417-5.811a38.734 38.734 0 0 0-1.215-5.494 36.68 36.68 0 0 0-3.648-8.298 35.923 35.923 0 0 0-9.489-10.48 36.347 36.347 0 0 0-6.15-3.67 37.124 37.124 0 0 0-5.12-1.958 37.67 37.67 0 0 0-3.624-.896 39.875 39.875 0 0 0-7.68-.737c-21.162 0-37.345 16.183-37.345 37.345 0 21.159 16.183 37.342 37.345 37.342z"}))))};function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){v(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function v(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==p(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===p(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const h=function(e){var t=e.contact,r=(0,o.v9)((function(e){return e.auth})).auth,n=(0,i.GW)(y(y({},r),{},{chatId:t.id})).data,a=(0,o.I0)();return n?c.createElement("li",{className:"contacts__item",onClick:function(){a((0,s.Wd)(n.chatId))}},n.avatar?c.createElement("img",{className:"contacts__item_avatar",src:n.avatar,alt:"#"}):c.createElement(f,{className:"contacts__item_avatar-default"}),c.createElement("div",{className:"contacts__item_name"},c.createElement("span",null,n.name?n.name:n.chatId))):null},d=function(e){var t=e.contacts,r=(0,o.I0)(),n=u.Ry().shape({contact:u.Rx().typeError("Must be a number")}),a=(0,l.TA)({validationSchema:n,initialValues:{contact:""},onSubmit:function(e,t){var n=t.resetForm,a=e.contact.split("+")[1]+"@c.us";r((0,s.Wd)(a)),n()}});return c.createElement("ul",{className:"contacts"},c.createElement("li",null,c.createElement("form",{className:"contacts__form",onSubmit:a.handleSubmit},c.createElement("input",{id:"contact",name:"contact",type:"tel",placeholder:"+79999999999",onChange:a.handleChange,onBlur:a.handleBlur,value:a.values.message}),a.touched.contact&&a.errors.contact)),t&&t.map((function(e,t){return c.createElement(h,{key:e.id+t,contact:e})})))},g=function(){return c.createElement("div",{className:"chat__not-active"},c.createElement("h1",null,"Green API"),c.createElement("p",null,"Отправляйте и получайте сообщения без необходимости оставлять телефон подключённым."))};function O(e){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O(e)}function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach((function(t){S(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function S(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==O(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==O(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===O(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const w=function(e){var t,r,n=e.refetch,a=(0,o.v9)((function(e){return e.auth})).auth,u=(0,o.v9)((function(e){return e.chat})).chatId,s=(t=(0,c.useState)(""),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,c,o,i=[],l=!0,u=!1;try{if(c=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=c.call(r)).done)&&(i.push(n.value),i.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return i}}(t,r)||function(e,t){if(e){if("string"==typeof e)return _(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),m=s[0],f=s[1];(0,i.dS)(j(j({},a),{},{chatId:u,message:m}),{skip:""===m});var p=(0,l.TA)({initialValues:{message:""},onSubmit:function(e,t){var r=t.resetForm;f(e.message),r(),n()}});return c.createElement("div",{className:"chat__active_form"},c.createElement("form",{className:"login__form",onSubmit:p.handleSubmit},c.createElement("input",{id:"message",name:"message",type:"text",placeholder:"Your message",onChange:p.handleChange,value:p.values.message}),c.createElement("button",{className:"chat__active_form_button",type:"submit"},"Send")))};function P(e){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P(e)}function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function N(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach((function(t){D(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function D(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==P(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==P(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===P(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const k=function(){var e,t=(0,c.useRef)(null),r=(0,c.useRef)(null),n=(0,o.v9)((function(e){return e.auth})).auth,a=(0,o.v9)((function(e){return e.chat})).chatId,l=(0,i.C7)(N(N({},n),{},{chatId:a})),u=l.data,s=l.refetch,m=(0,i.GW)(N(N({},n),{},{chatId:a})).data,p=(0,i.tE)(n,{pollingInterval:3e3}).data;return(0,c.useEffect)((function(){r.current=p})),(null===(e=r.current)||void 0===e?void 0:e.receiptId)!==(null==p?void 0:p.receiptId)&&s(),(0,i.Kl)(N(N({},n),{},{receiptId:null==p?void 0:p.receiptId}),{skip:!p}),(0,c.useEffect)((function(){t&&t.current.scrollIntoView({behavior:"smooth"})}),[]),console.log(m,a),c.createElement("div",{className:"chat__active"},c.createElement("div",{className:"chat__active_header"},null!=m&&m.avatar?c.createElement("img",{className:"contacts__item_avatar",src:m.avatar,alt:"#"}):c.createElement(f,{className:"contacts__item_avatar-default"}),c.createElement("div",{className:"contacts__item_name"},c.createElement("span",null,null!=m&&m.name?m.name:a))),c.createElement("div",{className:"chat__active_content"},c.createElement("ul",null,u&&u.map((function(e){return c.createElement("li",{key:e.idMessage,style:{textAlign:"incoming"===e.type?"end":"initial",padding:"5px 0"}},e.textMessage)})),c.createElement("li",{style:{height:1},ref:t}))),c.createElement(w,{refetch:s}))},C=function(){var e=(0,o.v9)((function(e){return e.chat})).chatId;return console.log("chat",e),c.createElement("div",{className:"chat"},!e&&c.createElement(g,null),e&&c.createElement(k,null))},A=function(){var e=(0,o.v9)((function(e){return e.auth})).auth,t=(0,i.Gu)(e).data;return c.createElement("div",{className:"main"},c.createElement(d,{contacts:t}),c.createElement(C,null))}}}]);